define("page",[],(function(t,i,e){var s,a=(s=document.getElementsByTagName("html")[0],function(){return parseInt(window.getComputedStyle(s).fontSize)}),n=function(){var t=this,i=function(t,i){return~~(Math.random()*(i-t+1)+t)};window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},t.init=function(){t.dt=0,t.oldTime=Date.now(),t.canvas=document.createElement("canvas"),t.canvasContainer=$("#yanhua");document.getElementById("canvas-container");function i(t){return parseInt(t)/a()}t.canvas.onselectstart=function(){return!1},t.canvas.width=t.cw=i($("#yanhua").width())*parseFloat(document.querySelector("html").style.fontSize),t.canvas.height=t.ch=i($("#yanhua").height())*parseFloat(document.querySelector("html").style.fontSize),t.particles=[],t.partCount=60,t.fireworks=[],t.mx=t.cw/2,t.my=t.ch/2,t.currentHue=170,t.partSpeed=5,t.partSpeedVariance=10,t.partWind=50,t.partFriction=25,t.partGravity=1,t.hueMin=200,t.hueMax=360,t.fworkSpeed=2,t.fworkAccel=4,t.hueVariance=30,t.flickerDensity=20,t.showShockwave=!0,t.showTarget=!1,t.clearAlpha=25,t.canvasContainer.append(t.canvas),t.ctx=t.canvas.getContext("2d"),t.ctx.lineCap="round",t.ctx.lineJoin="round",t.lineWidth=1,t.bindEvents(),t.canvasLoop(),t.canvas.onselectstart=function(){return!1}};var e=function(e,s,a){this.x=e,this.y=s,this.coordLast=[{x:e,y:s},{x:e,y:s},{x:e,y:s}],this.angle=i(0,360),this.speed=i(t.partSpeed-t.partSpeedVariance<=0?1:t.partSpeed-t.partSpeedVariance,t.partSpeed+t.partSpeedVariance),this.friction=1-t.partFriction/100,this.gravity=t.partGravity/2,this.hue=i(a-t.hueVariance,a+t.hueVariance),this.brightness=i(50,80),this.alpha=i(40,100)/100,this.decay=i(10,50)/1e3,this.wind=(i(0,t.partWind)-t.partWind/2)/25,this.lineWidth=t.lineWidth};e.prototype.update=function(i){var e,s,a,n,r,h,o,c,d=this.angle*Math.PI/180,u=Math.cos(d)*this.speed,l=Math.sin(d)*this.speed+this.gravity;this.speed*=this.friction,this.coordLast[2].x=this.coordLast[1].x,this.coordLast[2].y=this.coordLast[1].y,this.coordLast[1].x=this.coordLast[0].x,this.coordLast[1].y=this.coordLast[0].y,this.coordLast[0].x=this.x,this.coordLast[0].y=this.y,this.x+=u*t.dt,this.y+=l*t.dt,this.angle+=this.wind,this.alpha-=this.decay,e=0,s=0,a=t.cw,n=t.ch,r=this.x-this.radius,h=this.y-this.radius,o=2*this.radius,c=2*this.radius,(e+a<r||r+o<e||s+n<h||h+c<s||this.alpha<.05)&&t.particles.splice(i,1)},e.prototype.draw=function(){var e=i(1,3)-1;if(t.ctx.beginPath(),t.ctx.moveTo(Math.round(this.coordLast[e].x),Math.round(this.coordLast[e].y)),t.ctx.lineTo(Math.round(this.x),Math.round(this.y)),t.ctx.closePath(),t.ctx.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",t.ctx.stroke(),t.flickerDensity>0){var s=50-t.flickerDensity;if(i(0,s)===s){t.ctx.beginPath(),t.ctx.arc(Math.round(this.x),Math.round(this.y),i(this.lineWidth,this.lineWidth+3)/2,0,2*Math.PI,!1),t.ctx.closePath();var a=i(50,100)/100;t.ctx.fillStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+a+")",t.ctx.fill()}}},t.createParticles=function(i,s,a){for(var n=t.partCount;n--;)t.particles.push(new e(i,s,a))},t.updateParticles=function(){for(var i=t.particles.length;i--;){t.particles[i].update(i)}},t.drawParticles=function(){for(var i=t.particles.length;i--;){t.particles[i].draw()}};var s=function(e,s,a,n){this.x=e,this.y=s,this.startX=e,this.startY=s,this.hitX=!1,this.hitY=!1,this.coordLast=[{x:e,y:s},{x:e,y:s},{x:e,y:s}],this.targetX=a,this.targetY=n,this.speed=t.fworkSpeed,this.angle=Math.atan2(n-s,a-e),this.shockwaveAngle=Math.atan2(n-s,a-e)+Math.PI/180*90,this.acceleration=t.fworkAccel/100,this.hue=t.currentHue,this.brightness=i(50,80),this.alpha=i(50,100)/100,this.lineWidth=t.lineWidth,this.targetRadius=1};s.prototype.update=function(e){if(t.ctx.lineWidth=this.lineWidth,vx=Math.cos(this.angle)*this.speed,vy=Math.sin(this.angle)*this.speed,this.speed*=1+this.acceleration,this.coordLast[2].x=this.coordLast[1].x,this.coordLast[2].y=this.coordLast[1].y,this.coordLast[1].x=this.coordLast[0].x,this.coordLast[1].y=this.coordLast[0].y,this.coordLast[0].x=this.x,this.coordLast[0].y=this.y,t.showTarget&&(this.targetRadius<8?this.targetRadius+=.25*t.dt:this.targetRadius=1*t.dt),this.startX>=this.targetX?this.x+vx<=this.targetX?(this.x=this.targetX,this.hitX=!0):this.x+=vx*t.dt:this.x+vx>=this.targetX?(this.x=this.targetX,this.hitX=!0):this.x+=vx*t.dt,this.startY>=this.targetY?this.y+vy<=this.targetY?(this.y=this.targetY,this.hitY=!0):this.y+=vy*t.dt:this.y+vy>=this.targetY?(this.y=this.targetY,this.hitY=!0):this.y+=vy*t.dt,this.hitX&&this.hitY){i(0,9);t.createParticles(this.targetX,this.targetY,this.hue),t.fireworks.splice(e,1)}},s.prototype.draw=function(){t.ctx.lineWidth=this.lineWidth;var e=i(1,3)-1;t.ctx.beginPath(),t.ctx.moveTo(Math.round(this.coordLast[e].x),Math.round(this.coordLast[e].y)),t.ctx.lineTo(Math.round(this.x),Math.round(this.y)),t.ctx.closePath(),t.ctx.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",t.ctx.stroke(),t.showTarget&&(t.ctx.save(),t.ctx.beginPath(),t.ctx.arc(Math.round(this.targetX),Math.round(this.targetY),this.targetRadius,0,2*Math.PI,!1),t.ctx.closePath(),t.ctx.lineWidth=1,t.ctx.stroke(),t.ctx.restore()),t.showShockwave&&(t.ctx.save(),t.ctx.translate(Math.round(this.x),Math.round(this.y)),t.ctx.rotate(this.shockwaveAngle),t.ctx.beginPath(),t.ctx.arc(0,0,this.speed/5*1,0,Math.PI,!0),t.ctx.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+i(25,60)/100+")",t.ctx.lineWidth=this.lineWidth,t.ctx.stroke(),t.ctx.restore())},t.createFireworks=function(i,e,a,n){t.fireworks.push(new s(i,e,a,n))},t.updateFireworks=function(){for(var i=t.fireworks.length;i--;){t.fireworks[i].update(i)}},t.drawFireworks=function(){for(var i=t.fireworks.length;i--;){t.fireworks[i].draw()}},t.bindEvents=function(){$(window).on("resize",(function(){clearTimeout(t.timeout),t.timeout=setTimeout((function(){t.ctx.lineCap="round",t.ctx.lineJoin="round"}),100)})),$(t.canvas).on("mousedown",(function(e){i(0,5);t.mx=e.pageX-t.canvasContainer.offset().left,t.my=e.pageY-t.canvasContainer.offset().top,t.currentHue=i(t.hueMin,t.hueMax),t.createFireworks(t.cw/2,t.ch,t.mx,t.my),$(t.canvas).on("mousemove.fireworks",(function(e){i(0,5);t.mx=e.pageX-t.canvasContainer.offset().left,t.my=e.pageY-t.canvasContainer.offset().top,t.currentHue=i(t.hueMin,t.hueMax),t.createFireworks(t.cw/2,t.ch,t.mx,t.my)}))})),$(t.canvas).on("mouseup",(function(i){$(t.canvas).off("mousemove.fireworks")}))},t.clear=function(){t.particles=[],t.fireworks=[],t.ctx.clearRect(0,0,t.cw,t.ch)},t.updateDelta=function(){var i=Date.now();t.dt=(i-t.oldTime)/16,t.dt=t.dt>5?5:t.dt,t.oldTime=i},t.canvasLoop=function(){requestAnimFrame(t.canvasLoop,t.canvas),t.updateDelta(),t.ctx.globalCompositeOperation="destination-out",t.ctx.fillStyle="rgba(0,0,0,"+t.clearAlpha/100+")",t.ctx.fillRect(0,0,t.cw,t.ch),t.ctx.globalCompositeOperation="lighter",t.updateFireworks(),t.updateParticles(),t.drawFireworks(),t.drawParticles()},t.init();for(var n,r,h,o=3;o--;)setTimeout((function(){t.fireworks.push(new s(t.cw/2,t.ch,i(30,t.cw-50),i(50,t.ch/2)))}),500*o);void 0!==document.hidden?("hidden",r="visibilitychange",n="visibilityState"):void 0!==document.mozHidden?("mozHidden",r="mozvisibilitychange",n="mozVisibilityState"):void 0!==document.msHidden?("msHidden",r="msvisibilitychange",n="msVisibilityState"):void 0!==document.webkitHidden&&("webkitHidden",r="webkitvisibilitychange",n="webkitVisibilityState"),document.addEventListener(r,(function(){"visible"==document[n]?h=setInterval((function(){for(var e=3;e--;)setTimeout((function(){t.fireworks.push(new s(t.cw/2,t.ch,i(30,t.cw-50),i(50,t.ch/2)))}),500*e)}),4e3):clearInterval(h)}),!1),h=setInterval((function(){for(var e=3;e--;)setTimeout((function(){t.fireworks.push(new s(t.cw/2,t.ch,i(30,t.cw-50),i(50,t.ch/2)))}),500*e)}),4e3)};setTimeout((function(){new n}),1e3)}));